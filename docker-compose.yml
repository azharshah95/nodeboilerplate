version: '2'
services: 
  client:
    image: azharshah1995/react-app:dev
    restart: always
    container_name: react-app-dev
    ports: 
      - "3000:3000"
    environment: 
      - REACT_APP_NODE_ENV=development
      - REACT_APP_LOCAL_API_URL=http://localhost:5000/api
      - REACT_APP_LIVE_API_URL=https://murmuring-fjord-08521.herokuapp.com/api
    depends_on: 
      - mongodb
      - api
    links: 
      - api
    networks: 
      - webappnetwork
  api:
    image: azharshah1995/node-app:dev
    restart: always
    container_name: node-app-dev
    ports: 
      - "5000:5000"
    environment: 
      - NODE_ENV=development
      - PORT=5000
      - MONGODB_PROD_URI=mongodb+srv://azhar:azhar@cluster0-cbryz.mongodb.net/test?retryWrites=true&w=majority
      - MONGODB_DEV_URI=mongodb://mongodb:27017/nodeboilerplate
      - SECRET_OR_KEY=secret
      - JWT_EXPIRY=900
    depends_on: 
      - mongodb
    networks: 
      - webappnetwork
  mongodb:
    image: mongo:latest
    restart: always
    container_name: mongodb
    volumes: 
      - ./data-node:/data/db
    ports: 
      - "27017:27017"
    # command: mongod --noauth --smallfiles
    command: mongod --noauth
    networks:
      - webappnetwork
networks: 
  webappnetwork:
    driver: bridge
    